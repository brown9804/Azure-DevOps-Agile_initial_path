<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>README</title>
  <style>
    html {
      color: #1a1a1a;
      background-color: #fdfdfd;
    }
    body {
      margin: 0 auto;
      max-width: 36em;
      padding-left: 50px;
      padding-right: 50px;
      padding-top: 50px;
      padding-bottom: 50px;
      hyphens: auto;
      overflow-wrap: break-word;
      text-rendering: optimizeLegibility;
      font-kerning: normal;
    }
    @media (max-width: 600px) {
      body {
        font-size: 0.9em;
        padding: 12px;
      }
      h1 {
        font-size: 1.8em;
      }
    }
    @media print {
      html {
        background-color: white;
      }
      body {
        background-color: transparent;
        color: black;
        font-size: 12pt;
      }
      p, h2, h3 {
        orphans: 3;
        widows: 3;
      }
      h2, h3, h4 {
        page-break-after: avoid;
      }
    }
    p {
      margin: 1em 0;
    }
    a {
      color: #1a1a1a;
    }
    a:visited {
      color: #1a1a1a;
    }
    img {
      max-width: 100%;
    }
    h1, h2, h3, h4, h5, h6 {
      margin-top: 1.4em;
    }
    h5, h6 {
      font-size: 1em;
      font-style: italic;
    }
    h6 {
      font-weight: normal;
    }
    ol, ul {
      padding-left: 1.7em;
      margin-top: 1em;
    }
    li > ol, li > ul {
      margin-top: 0;
    }
    blockquote {
      margin: 1em 0 1em 1.7em;
      padding-left: 1em;
      border-left: 2px solid #e6e6e6;
      color: #606060;
    }
    code {
      font-family: Menlo, Monaco, Consolas, 'Lucida Console', monospace;
      font-size: 85%;
      margin: 0;
      hyphens: manual;
    }
    pre {
      margin: 1em 0;
      overflow: auto;
    }
    pre code {
      padding: 0;
      overflow: visible;
      overflow-wrap: normal;
    }
    .sourceCode {
     background-color: transparent;
     overflow: visible;
    }
    hr {
      background-color: #1a1a1a;
      border: none;
      height: 1px;
      margin: 1em 0;
    }
    table {
      margin: 1em 0;
      border-collapse: collapse;
      width: 100%;
      overflow-x: auto;
      display: block;
      font-variant-numeric: lining-nums tabular-nums;
    }
    table caption {
      margin-bottom: 0.75em;
    }
    tbody {
      margin-top: 0.5em;
      border-top: 1px solid #1a1a1a;
      border-bottom: 1px solid #1a1a1a;
    }
    th {
      border-top: 1px solid #1a1a1a;
      padding: 0.25em 0.5em 0.25em 0.5em;
    }
    td {
      padding: 0.125em 0.5em 0.25em 0.5em;
    }
    header {
      margin-bottom: 4em;
      text-align: center;
    }
    #TOC li {
      list-style: none;
    }
    #TOC ul {
      padding-left: 1.3em;
    }
    #TOC > ul {
      padding-left: 0;
    }
    #TOC a:not(:hover) {
      text-decoration: none;
    }
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    /* The extra [class] is a hack that increases specificity enough to
       override a similar rule in reveal.js */
    ul.task-list[class]{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      font-size: inherit;
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
  </style>
</head>
<body>
<nav id="TOC" role="doc-toc">
<ul>
<li><a
href="#using-terraform-provisioners-to-set-up-an-apache-web-server-on-aws"
id="toc-using-terraform-provisioners-to-set-up-an-apache-web-server-on-aws">Using
Terraform Provisioners to Set Up an Apache Web Server on AWS</a>
<ul>
<li><a href="#connect-to-the-server"
id="toc-connect-to-the-server"><em>Connect to the server</em>:</a></li>
<li><a href="#examine-the-code-in-the-main.tf-file"
id="toc-examine-the-code-in-the-main.tf-file">Examine the Code in the
main.tf File:</a></li>
<li><a href="#deploy-the-code-and-access-the-bootstrapped-webserver"
id="toc-deploy-the-code-and-access-the-bootstrapped-webserver">Deploy
the Code and Access the Bootstrapped Webserver:</a></li>
<li><a href="#reference" id="toc-reference">Reference:</a></li>
</ul></li>
</ul>
</nav>
<h1
id="using-terraform-provisioners-to-set-up-an-apache-web-server-on-aws">Using
Terraform Provisioners to Set Up an Apache Web Server on AWS</h1>
<hr />
<p>Costa Rica</p>
<p>Belinda Brown, belindabrownr04@gmail.com</p>
<p><a href="https://www.gnu.org/licenses/gpl-3.0"><img
src="https://img.shields.io/badge/License-GPLv3-blue.svg"
alt="License: GPL v3" /></a> <a href="https://github.com"><img
src="https://badgen.net/badge/icon/github?icon=github&amp;label"
alt="GitHub" /></a> <a href="https://github.com/Naereen/badges/"><img
src="https://badgen.net/badge/Open%20Source%20%3F/Yes%21/blue?icon=github"
alt="Open Source? Yes!" /></a></p>
<p><a href="https://github.com/"><img
src="https://img.shields.io/badge/--181717?logo=github&amp;logoColor=ffffff"
alt="GitHub" /></a> <a
href="https://github.com/brown9804">brown9804</a></p>
<p>Jan, 2022</p>
<hr />
<p>This is a summary based on <a href="#reference">References</a></p>
<h3 id="connect-to-the-server"><em>Connect to the server</em>:</h3>
<p><code>ssh &lt;user_name&gt;@&lt;IPadress&gt;</code></p>
<h2 id="examine-the-code-in-the-main.tf-file">Examine the Code in the
main.tf File:</h2>
<blockquote>
<p>View the contents of the main.tf file using the cat command:<br/></p>
</blockquote>
<p><code>cat main.tf</code></p>
<blockquote>
<p>Examine the code in the resource block and note the following: <br/>
1. We are creating an AWS EC2 instance (virtual machine) named
webserver. 2. We are passing a number of parameters for the resource,
such as the AMI that the VM will be spun up as, the instance type, the
private key that the instance will be using, the public IP attached to
the instance, the security group applied to the instance, and the subnet
ID where the VM will be spun up.</p>
</blockquote>
<blockquote>
<p>Note: All of these resources are actually being created via the
setup.tf file, which you can view if desired.</p>
</blockquote>
<ol start="3" type="1">
<li>Examine the code in the provisioner block and note the
following:</li>
</ol>
<ul>
<li>The remote-exec keyword tells us that this is a remote provisioner,
which invokes a script on a remote resource after it is created.</li>
<li>The provisioner is using the parameters configured in the embedded
connection block to connect to the AWS EC2 instance being created.</li>
<li>The provisioner will then issue the commands configured in the
inline block to install Apache webserver on CentOS through the yum
package manager, start up the Apache server, create a single web page
called My Test Website With Help From Terraform Provisioner as an
index.html file, and move that file into the data directory of the
webserver to be served out globally.</li>
</ul>
<h2 id="deploy-the-code-and-access-the-bootstrapped-webserver">Deploy
the Code and Access the Bootstrapped Webserver:</h2>
<p><code>export TF_LOG=TRACE</code></p>
<p><code>export TF_LOG_PATH=./terraform.log</code></p>
<p><code>$ terraform init</code></p>
<p><code>$ ls -a</code></p>
<p><code>$ terraform fmt</code></p>
<p><code>$ terraform validate</code></p>
<p><code>$ terraform plan</code></p>
<p><code>$ terraform apply</code></p>
<blockquote>
<p>Enter a value: yes</p>
</blockquote>
<blockquote>
<p>As the code is being deployed, you will notice that the Terraform
provisioner tries to connect to the EC2 instance, and once that
connection is established, it will run the bootstrapping that was
configured in the provisioner block against the instance. <br/></p>
</blockquote>
<blockquote>
<p>When complete, it will output the public IP for the Apache webserver
as the Webserver-Public-IP value. <br/></p>
</blockquote>
<blockquote>
<p>Copy the IP address, paste it in a new browser window or tab, and
press Enter. <br/></p>
</blockquote>
<blockquote>
<p>Verify that the web page displays as My Test Website With Help From
Terraform Provisioner, validating that the provisioner within your code
worked as intended. The commands configured in the provisioner code were
issued and executed successfully on the EC2 instance that was created.
<br/></p>
</blockquote>
<p><code>$ terraform destroy</code></p>
<blockquote>
<p>Enter a value: yes</p>
</blockquote>
<h2 id="reference">Reference:</h2>
<p>[1] From
https://learn.acloud.guru/course/bd8060c6-e408-4801-a4a3-8317c45319bf/dashboard
<br/></p>
</body>
</html>
